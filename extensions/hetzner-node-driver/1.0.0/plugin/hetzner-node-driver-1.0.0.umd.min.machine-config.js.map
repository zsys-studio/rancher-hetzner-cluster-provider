{"version":3,"file":"hetzner-node-driver-1.0.0.umd.min.machine-config.js","mappings":"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","sources":["webpack://hetzner-node-driver-1.0.0/./machine-config/hetzner.vue","webpack://hetzner-node-driver-1.0.0/./machine-config/hetzner.vue?58f4","webpack://hetzner-node-driver-1.0.0/./.shell/assets/brand/ sync ^\\.\\/.*\\/metadata\\.json$"],"sourcesContent":["<script>\nimport Loading from '@shell/components/Loading';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { RadioGroup } from '@components/Form/Radio';\nimport { NORMAN } from '@shell/config/types';\nimport { stringify, exceptionToErrorsArray } from '@shell/utils/error';\nimport { Banner } from '@components/Banner';\n\nexport default {\n  components: {\n    Loading, LabeledSelect, Checkbox, LabeledInput, RadioGroup, Banner\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    credentialId: {\n      type:     String,\n      required: true,\n    },\n\n    cluster: {\n      type:    Object,\n      default: () => ({})\n    },\n\n    disabled: {\n      type:    Boolean,\n      default: false\n    },\n  },\n\n  async fetch() {\n    this.errors = [];\n\n    try {\n      if (this.credentialId) {\n        this.credential = await this.$store.dispatch('rancher/find', {\n          type: NORMAN.CLOUD_CREDENTIAL,\n          id:   this.credentialId\n        });\n      }\n    } catch (e) {\n      this.credential = null;\n    }\n\n    // Auto-populate cluster ID for shared firewall and resource labeling.\n    // On new clusters, the name starts empty and gets set as the user types.\n    // On existing clusters (edit mode), the name is already present at mount.\n    const clusterName = this.cluster?.metadata?.name;\n\n    if (clusterName && !this.value.clusterId) {\n      this.value.clusterId = clusterName;\n      this.clusterIdAutoSet = true;\n    } else if (clusterName && this.value.clusterId === clusterName) {\n      // Editing an existing cluster where clusterId was previously auto-set\n      this.clusterIdAutoSet = true;\n    }\n\n    try {\n      // Fetch locations\n      this.locationOptions = await this.$store.dispatch('hetzner/locationOptions', { credentialId: this.credentialId });\n\n      let defaultLocation = 'fsn1';\n\n      if (!this.locationOptions.find((x) => x.value === defaultLocation)) {\n        defaultLocation = this.locationOptions[0]?.value;\n      }\n\n      if (!this.value.serverLocation) {\n        this.value.serverLocation = defaultLocation;\n      }\n\n      // Fetch server types\n      this.serverTypeOptions = await this.$store.dispatch('hetzner/serverTypeOptions', { credentialId: this.credentialId });\n\n      let defaultServerType = 'cx23';\n\n      if (!this.serverTypeOptions.find((x) => x.value === defaultServerType)) {\n        defaultServerType = this.serverTypeOptions.find((x) => x.memoryGb >= 4)?.value;\n\n        if (!defaultServerType) {\n          defaultServerType = this.serverTypeOptions[0]?.value;\n        }\n      }\n\n      if (!this.value.serverType) {\n        this.value.serverType = defaultServerType;\n      }\n\n      // Fetch images matching the selected server type's architecture\n      const selectedType = this.serverTypeOptions.find((x) => x.value === this.value.serverType);\n      const arch = selectedType?.architecture || 'x86';\n\n      this.imageOptions = await this.$store.dispatch('hetzner/imageOptions', { credentialId: this.credentialId, architecture: arch });\n\n      let defaultImage = 'ubuntu-24.04';\n\n      if (!this.imageOptions.find((x) => x.value === defaultImage)) {\n        defaultImage = this.imageOptions[0]?.value;\n      }\n\n      if (!this.value.image) {\n        this.value.image = defaultImage;\n      }\n\n      // Fetch networks\n      this.networkOptions = await this.$store.dispatch('hetzner/networkOptions', { credentialId: this.credentialId });\n\n      // Default: enable private network and disable public IPv6\n      if (this.value.usePrivateNetwork === undefined || (!this.value.usePrivateNetwork && !this.value.networks?.length)) {\n        this.value.usePrivateNetwork = true;\n        this.value.disablePublicIpv6 = true;\n\n        // Auto-select the first available private network\n        if (this.networkOptions.length && (!this.value.networks || !this.value.networks.length)) {\n          this.value.networks = [this.networkOptions[0].value];\n        }\n      }\n\n      // Fetch firewalls\n      this.firewallOptions = await this.$store.dispatch('hetzner/firewallOptions', { credentialId: this.credentialId });\n\n      // Default: create new firewall with auto-created RKE2 rules\n      if (!this.value.createFirewall && !this.value.firewalls?.length) {\n        this.firewallMode = 'create';\n        this.value.createFirewall = true;\n        this.value.autoCreateFirewallRules = true;\n      }\n\n      // Fetch SSH keys\n      this.sshKeyOptions = await this.$store.dispatch('hetzner/sshKeyOptions', { credentialId: this.credentialId });\n\n      // Default: use existing SSH key (select the first one)\n      if (!this.useExistingSshKey && !this.value.existingSshKey && this.sshKeyOptions.length) {\n        this.useExistingSshKey = true;\n        this.value.existingSshKey = this.sshKeyOptions[0].value;\n      }\n    } catch (e) {\n      console.error('Hetzner machine-config fetch error:', e);\n      this.errors = exceptionToErrorsArray(e);\n    }\n  },\n\n  data() {\n    // Determine initial firewall mode from existing values\n    let firewallMode = 'none';\n\n    if (this.value?.createFirewall) {\n      firewallMode = 'create';\n    } else if (this.value?.firewalls && this.value.firewalls.length > 0) {\n      firewallMode = 'existing';\n    }\n\n    return {\n      credential:        null,\n      locationOptions:   [],\n      serverTypeOptions: [],\n      imageOptions:      [],\n      networkOptions:    [],\n      firewallOptions:   [],\n      sshKeyOptions:     [],\n      useExistingSshKey: !!this.value?.existingSshKey,\n      firewallMode,\n      clusterIdAutoSet:  false,\n      errors:            [],\n    };\n  },\n\n  watch: {\n    'credentialId'() {\n      this.$fetch();\n    },\n\n    'cluster.metadata.name'(name) {\n      if (name && (!this.value.clusterId || this.clusterIdAutoSet)) {\n        this.value.clusterId = name;\n        this.clusterIdAutoSet = true;\n      }\n    },\n\n    useExistingSshKey(val) {\n      if (!val) {\n        this.value.existingSshKey = '';\n      }\n    },\n\n    firewallMode(val) {\n      if (val === 'none') {\n        this.value.firewalls = [];\n        this.value.createFirewall = false;\n        this.value.firewallName = '';\n        this.value.autoCreateFirewallRules = false;\n      } else if (val === 'existing') {\n        this.value.createFirewall = false;\n        this.value.firewallName = '';\n        this.value.autoCreateFirewallRules = false;\n      } else if (val === 'create') {\n        this.value.firewalls = [];\n        this.value.createFirewall = true;\n      }\n    },\n\n    'value.serverType'(newVal) {\n      if (newVal && this.serverTypeOptions.length) {\n        const selected = this.serverTypeOptions.find((x) => x.value === newVal);\n\n        if (selected) {\n          this.refreshImages(selected.architecture);\n        }\n      }\n    },\n  },\n\n  methods: {\n    stringify,\n\n    async refreshImages(architecture) {\n      try {\n        this.imageOptions = await this.$store.dispatch('hetzner/imageOptions', {\n          credentialId: this.credentialId,\n          architecture: architecture || 'x86',\n        });\n\n        // Reset selected image if it's no longer available for this architecture\n        if (this.value.image && !this.imageOptions.find((x) => x.value === this.value.image)) {\n          this.value.image = this.imageOptions[0]?.value || '';\n        }\n      } catch (e) {\n        console.error('Error refreshing images for architecture:', architecture, e);\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <Loading\n    v-if=\"$fetchState.pending\"\n    :delayed=\"true\"\n  />\n  <div v-else-if=\"errors.length\">\n    <div\n      v-for=\"(err, idx) in errors\"\n      :key=\"idx\"\n    >\n      <Banner\n        color=\"error\"\n        :label=\"stringify(err)\"\n      />\n    </div>\n  </div>\n  <div v-else>\n    <div class=\"row mt-20\">\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model:value=\"value.serverLocation\"\n          :mode=\"mode\"\n          :options=\"locationOptions\"\n          :searchable=\"true\"\n          :required=\"true\"\n          :disabled=\"disabled\"\n          :label=\"t('cluster.machineConfig.hetzner.location.label')\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model:value=\"value.serverType\"\n          :mode=\"mode\"\n          :options=\"serverTypeOptions\"\n          :searchable=\"true\"\n          :required=\"true\"\n          :disabled=\"disabled\"\n          :label=\"t('cluster.machineConfig.hetzner.serverType.label')\"\n        />\n      </div>\n    </div>\n\n    <div class=\"row mt-20\">\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model:value=\"value.image\"\n          :mode=\"mode\"\n          :options=\"imageOptions\"\n          :searchable=\"true\"\n          :required=\"true\"\n          :disabled=\"disabled\"\n          :label=\"t('cluster.machineConfig.hetzner.image.label')\"\n        />\n      </div>\n      <div class=\"col span-6 pt-5\">\n        <h3>{{ t('cluster.machineConfig.hetzner.additionalOptions.label') }}</h3>\n        <Checkbox\n          v-model:value=\"value.usePrivateNetwork\"\n          :mode=\"mode\"\n          :disabled=\"disabled\"\n          :label=\"t('cluster.machineConfig.hetzner.usePrivateNetwork.label')\"\n        />\n        <Checkbox\n          v-model:value=\"value.disablePublicIpv4\"\n          :mode=\"mode\"\n          :disabled=\"disabled\"\n          :label=\"t('cluster.machineConfig.hetzner.disablePublicIpv4.label')\"\n        />\n        <Checkbox\n          v-model:value=\"value.disablePublicIpv6\"\n          :mode=\"mode\"\n          :disabled=\"disabled\"\n          :label=\"t('cluster.machineConfig.hetzner.disablePublicIpv6.label')\"\n        />\n      </div>\n    </div>\n\n    <div\n      v-if=\"value.usePrivateNetwork\"\n      class=\"row mt-20\"\n    >\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model:value=\"value.networks\"\n          :mode=\"mode\"\n          :options=\"networkOptions\"\n          :searchable=\"true\"\n          :multiple=\"true\"\n          :disabled=\"disabled\"\n          :label=\"t('cluster.machineConfig.hetzner.networks.label')\"\n        />\n      </div>\n    </div>\n\n    <!-- Firewall Section -->\n    <div class=\"row mt-20\">\n      <div class=\"col span-12\">\n        <h3>{{ t('cluster.machineConfig.hetzner.firewallSection.label') }}</h3>\n        <RadioGroup\n          v-model:value=\"firewallMode\"\n          name=\"firewallMode\"\n          :disabled=\"disabled\"\n          :options=\"[\n            { value: 'none', label: t('cluster.machineConfig.hetzner.firewallMode.none') },\n            { value: 'existing', label: t('cluster.machineConfig.hetzner.firewallMode.existing') },\n            { value: 'create', label: t('cluster.machineConfig.hetzner.firewallMode.create') },\n          ]\"\n          :row=\"true\"\n        />\n      </div>\n    </div>\n\n    <!-- Existing Firewall Selection -->\n    <div\n      v-if=\"firewallMode === 'existing'\"\n      class=\"row mt-10\"\n    >\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model:value=\"value.firewalls\"\n          :mode=\"mode\"\n          :options=\"firewallOptions\"\n          :searchable=\"true\"\n          :multiple=\"true\"\n          :disabled=\"disabled\"\n          :label=\"t('cluster.machineConfig.hetzner.firewalls.label')\"\n        />\n      </div>\n    </div>\n\n    <!-- Create New Firewall -->\n    <div\n      v-if=\"firewallMode === 'create'\"\n      class=\"row mt-10\"\n    >\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model:value=\"value.firewallName\"\n          :mode=\"mode\"\n          :disabled=\"disabled\"\n          :label=\"t('cluster.machineConfig.hetzner.firewallName.label')\"\n          :placeholder=\"t('cluster.machineConfig.hetzner.firewallName.placeholder')\"\n        />\n      </div>\n      <div class=\"col span-6 pt-5\">\n        <Checkbox\n          v-model:value=\"value.autoCreateFirewallRules\"\n          :mode=\"mode\"\n          :disabled=\"disabled\"\n          :label=\"t('cluster.machineConfig.hetzner.autoCreateFirewallRules.label')\"\n        />\n        <p class=\"text-muted mt-5\">\n          {{ t('cluster.machineConfig.hetzner.autoCreateFirewallRules.description') }}\n        </p>\n      </div>\n    </div>\n\n    <div\n      v-if=\"firewallMode === 'create' && value.autoCreateFirewallRules && value.disablePublicIpv4\"\n      class=\"row mt-10\"\n    >\n      <div class=\"col span-12\">\n        <Banner\n          color=\"warning\"\n          :label=\"t('cluster.machineConfig.hetzner.autoCreateFirewallRules.ipv4Warning')\"\n        />\n      </div>\n    </div>\n\n    <div class=\"row mt-20\">\n      <div class=\"col span-6 pt-5\">\n        <Checkbox\n          v-model:value=\"useExistingSshKey\"\n          :mode=\"mode\"\n          :disabled=\"disabled\"\n          :label=\"t('cluster.machineConfig.hetzner.useExistingSshKey.label')\"\n        />\n      </div>\n    </div>\n\n    <div\n      v-if=\"useExistingSshKey\"\n      class=\"row mt-10\"\n    >\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model:value=\"value.existingSshKey\"\n          :mode=\"mode\"\n          :options=\"sshKeyOptions\"\n          :searchable=\"true\"\n          :disabled=\"disabled\"\n          :label=\"t('cluster.machineConfig.hetzner.existingSshKey.label')\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n","import { render } from \"./hetzner.vue?vue&type=template&id=e11da174\"\nimport script from \"./hetzner.vue?vue&type=script&lang=js\"\nexport * from \"./hetzner.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","var map = {\n\t\"./classic/metadata.json\": 9621,\n\t\"./csp/metadata.json\": 6471,\n\t\"./federal/metadata.json\": 1862,\n\t\"./harvester/metadata.json\": 1507,\n\t\"./rgs/metadata.json\": 8401,\n\t\"./suse/metadata.json\": 7259\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1177;"],"names":["class","$fetchState","delayed","errors","err","idx","key","color","label","stringify","value","serverLocation","mode","options","locationOptions","searchable","required","disabled","t","serverType","serverTypeOptions","image","imageOptions","usePrivateNetwork","disablePublicIpv4","disablePublicIpv6","networks","networkOptions","multiple","firewallMode","name","row","firewalls","firewallOptions","firewallName","placeholder","autoCreateFirewallRules","useExistingSshKey","existingSshKey","sshKeyOptions","components","Loading","LabeledSelect","Checkbox","LabeledInput","RadioGroup","Banner","mixins","props","credentialId","type","String","cluster","Object","default","Boolean","fetch","this","credential","$store","dispatch","CLOUD_CREDENTIAL","id","e","clusterName","metadata","clusterId","clusterIdAutoSet","defaultLocation","find","x","defaultServerType","memoryGb","selectedType","arch","architecture","defaultImage","undefined","length","createFirewall","console","error","data","watch","$fetch","val","newVal","selected","refreshImages","methods","__exports__","render","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","keys","resolve","module","exports"],"sourceRoot":""}